<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clean {fusen} files • fusen</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Bootstrap --><link href="../cosmo.css" rel="stylesheet">
<link href="../thinkr.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Clean {fusen} files">
<meta property="og:description" content="fusen">
<meta property="og:image" content="https://thinkr-open.github.io/fusen/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
--><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!--  Code folding --><script src="../codefolding.js"></script><link href="../codefolding.css" rel="stylesheet">
<!--
<script>
         document.write('<div class="navbar"><div class="container"><div id="code-folding-buttons" class="btn-group"><button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div></div></div>')
</script>
--><!-- google analytics
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fusen</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/How-to-use-fusen.html">How to use fusen</a>
    </li>
    <li>
      <a href="../articles/Maintain-packages-with-fusen.html">Maintain packages with {fusen}</a>
    </li>
    <li>
      <a href="../articles/clean-fusen-files.html">Clean {fusen} files</a>
    </li>
    <li>
      <a href="../articles/inflate-all-your-flat-files.html">Inflate all your flat files</a>
    </li>
    <li>
      <a href="../articles/share-on-a-github-website.html">Share on a GitHub website</a>
    </li>
    <li>
      <a href="../articles/tips-and-tricks.html">Tips and tricks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <div id="code-folding-buttons" class="btn-group">
<button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>
        </li>
        <li>
  <a href="https://github.com/Thinkr-open/fusen/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Clean {fusen} files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Thinkr-open/fusen/blob/HEAD/vignettes/clean-fusen-files.Rmd" class="external-link"><code>vignettes/clean-fusen-files.Rmd</code></a></small>
      <div class="hidden name"><code>clean-fusen-files.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/fusen/">fusen</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_clean_fusen_files.Rmd: do not edit by hand -->
<div class="section level3">
<h3 id="fusen-registers-all-files-created-with-a-flat-file">{fusen} registers all files created with a flat file<a class="anchor" aria-label="anchor" href="#fusen-registers-all-files-created-with-a-flat-file"></a>
</h3>
<p>From {fusen} &gt;=0.5, a “config_fusen.yaml” file registers all files
created from a specific “flat” file as soon as you inflate it. Hence,
you can keep track on where to find the source of your functions and
tests. One of its major functionnality is to help you clean your package
files in case you decide to change a function name, delete a function or
change a vignette name.</p>
<p>To make this work properly, you will have to register all files that
were not created from a flat file. <code>add_files_to_config()</code>
will help you do so (See below: “Register some specific files, even with
regex”).</p>
<p>If you use this version of {fusen} in an existing project, you will
want to register all existing files to avoid a too strong clean up:
<code><a href="../reference/register_all_to_config.html">register_all_to_config()</a></code> will help you do so (See below:
“How to migrate from previous {fusen} versions?”).</p>
</div>
<div class="section level3">
<h3 id="fusen-helps-you-clean-your-old-functions-and-tests-files">{fusen} helps you clean your old functions and tests files<a class="anchor" aria-label="anchor" href="#fusen-helps-you-clean-your-old-functions-and-tests-files"></a>
</h3>
<p>{fusen} inflates your flat files to script files with pre-defined
names stored in the correct place, so that you do not have to think
about it. If you do not change the default behavior, scripts names are
created from the name of each function created.<br>
Until version 0.4, if you decided to change the name of your function,
or a function was obsolete, you had to clean it all manually.<br>
This time is over with {fusen} version &gt;0.5!<br>
Now, {fusen} keeps track of files created with an
<code><a href="../reference/inflate.html">inflate()</a></code>, in a yaml configuration file. It also allows you
to register all extra files that you decide are legitimate. Hence,
{fusen} will be able to clean all files that are not necessary anymore
in your package.</p>
<p>To make this work properly, all R, test and vignettes files will need
to be registered in the “dev/config_fusen.yaml” file.<br>
{fusen} will try to guess the source flat file of each script. This will
only be possible if you used {fusen} &gt;= 0.4 before. Otherwise, you
may want to follow the detailed process below.</p>
</div>
<div class="section level3">
<h3 id="delete-files-not-anymore-linked-to-a-flat-file">Delete files not anymore linked to a flat file<a class="anchor" aria-label="anchor" href="#delete-files-not-anymore-linked-to-a-flat-file"></a>
</h3>
<p>TODO - clean_fusen_files</p>
<div class="section level4">
<h4 id="register-some-specific-files-even-with-regex">Register some specific files, even with regex<a class="anchor" aria-label="anchor" href="#register-some-specific-files-even-with-regex"></a>
</h4>
<p>You may not want to register each new file that does not come during
an inflate process. For instance, with {golem}, there are module
(<code>^mod_*</code>) files, which need to be protected. You can add
this regular expression directly in the yaml file with
<code>add_files_to_config(c("R" = "^mod_*"))</code></p>
</div>
</div>
<div class="section level3">
<h3 id="deprecate-flat-files-after-inflate">Deprecate flat files after inflate<a class="anchor" aria-label="anchor" href="#deprecate-flat-files-after-inflate"></a>
</h3>
<p>If your practice of {fusen} is to inflate it once, and then continue
development in the R, test and vignette files directly, then you may
want to properly deprecated the flat file.<br>
We recommend to use <code>deprecate_flat_file()</code> to clean your
script files (remove “do not edit”), update the config file and move the
flat file in a “dev/dev_history” directory.</p>
<p>TODO</p>
</div>
<div class="section level3">
<h3 id="how-to-migrate-from-previous-fusen-versions">How to migrate from previous {fusen} versions?<a class="anchor" aria-label="anchor" href="#how-to-migrate-from-previous-fusen-versions"></a>
</h3>
<p>This vignette shows tools that are used internally to {fusen} to keep
track of all files created during the <code><a href="../reference/inflate.html">inflate()</a></code> process.
They are visible to users as soon as they start using {fusen} &gt;= 0.5,
even if the package was built without {fusen}, or with an earlier
version of {fusen}.</p>
<p>The recommended process for a migration is:</p>
<ul>
<li>Run <code><a href="../reference/register_all_to_config.html">register_all_to_config()</a></code> in your current package to
create the “dev/config_fusen.yaml” that registers all your existing
files.</li>
<li>You will note a “keep” section, which lists all files for which the
source was not guessed. You can clean it up if you want.</li>
<li>You’re good to go with the new version of {fusen}</li>
</ul>
<div class="section level4">
<h4 id="you-can-take-this-opportunity-to-clean-your-repository">You can take this opportunity to clean your repository<a class="anchor" aria-label="anchor" href="#you-can-take-this-opportunity-to-clean-your-repository"></a>
</h4>
<p>If you used earlier versions of {fusen}, it is possible that you have
some remaining “.R” or test files. You may want to detect which scripts
are linked to a flat file. If you are more familiar with “.csv” file
than with the “.yaml” file above, or if you want a quick edit of
multiple sources, you can run these intermediate steps:</p>
<ul>
<li>Run <code><a href="../reference/check_not_registered_files.html">check_not_registered_files()</a></code> on your package</li>
<li>Open the “dev/config_not_registered.csv” file
<ul>
<li>The csv contains all existing “R/”, “tests/” and “vignettes/”
files</li>
<li>If you used earlier version of {fusen}, the csv may list the flat
file of origin</li>
</ul>
</li>
<li>Clean or modify the csv file
<ul>
<li>Let <code>origin = "keep"</code> for files to keep, that are not
coming from a flat file</li>
</ul>
</li>
<li>Run <code><a href="../reference/df_to_config.html">df_to_config()</a></code>
</li>
<li>You’re good to go with the new version of {fusen}</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="the-details-of-each-function-linked-to-config">The details of each function linked to config<a class="anchor" aria-label="anchor" href="#the-details-of-each-function-linked-to-config"></a>
</h3>
<p>You can continue reading if you are interesting in the functioning of
these config file manipulations.</p>
<div class="section level4">
<h4 id="keep-it-all-i-am-sure-of-the-current-state">Keep it all, I am sure of the current state<a class="anchor" aria-label="anchor" href="#keep-it-all-i-am-sure-of-the-current-state"></a>
</h4>
<p>If all files of the current state are legitimate, then, you can
register everything in the config file.</p>
<p>Run <code><a href="../reference/register_all_to_config.html">register_all_to_config()</a></code> in your current package to
create the “dev/config_fusen.yaml” that registers all your files. You
will note a “keep” section, which lists all files for which the source
was not guessed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' \dontrun{</span></span>
<span><span class="co"># Usually run this one inside the current project</span></span>
<span><span class="co"># Note: running this will write "dev/config_fusen.yaml" in your working directory</span></span>
<span><span class="fu"><a href="../reference/register_all_to_config.html">register_all_to_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
<!-- Use eval=FALSE because inflate cannot work inside a Rmd vignette -->
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Or you can try on the reproducible example</span></span>
<span><span class="va">dummypackage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"register"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">dummypackage</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># {fusen} steps</span></span>
<span><span class="fu"><a href="../reference/fill_description.html">fill_description</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="va">dummypackage</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Title <span class="op">=</span> <span class="st">"Dummy Package"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dev_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="../reference/add_flat_template.html">add_flat_template</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="va">dummypackage</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">flat_file</span> <span class="op">&lt;-</span> <span class="va">dev_file</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"flat_"</span>, <span class="va">dev_file</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># Inflate once</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html" class="external-link">with_project</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/inflate.html">inflate</a></span><span class="op">(</span></span>
<span>      pkg <span class="op">=</span> <span class="va">dummypackage</span>, flat_file <span class="op">=</span> <span class="va">flat_file</span>,</span>
<span>      vignette_name <span class="op">=</span> <span class="st">"Get started"</span>, check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      open_vignette <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">out_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/register_all_to_config.html">register_all_to_config</a></span><span class="op">(</span><span class="va">dummypackage</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Look at the output</span></span>
<span>  <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html" class="external-link">read_yaml</a></span><span class="op">(</span><span class="va">out_path</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="protect-existing-r-tests-and-vignettes-files">Protect existing R, tests and vignettes files<a class="anchor" aria-label="anchor" href="#protect-existing-r-tests-and-vignettes-files"></a>
</h4>
<p><code><a href="../reference/df_to_config.html">df_to_config()</a></code> allows to add your own list of files that
you want to <code>keep</code> in your package, despite not being created
with a flat file.<br>
This is important if you started to develop without {fusen}, and start
using a flat file from now on, so that {fusen} does not delete your
existing files.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add your own list of files to "keep",</span></span>
<span><span class="co"># if they are not in a flat file.</span></span>
<span><span class="co"># Otherwise, they may be deleted with your next `inflate()`</span></span>
<span><span class="va">my_files_to_protect</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">type</span>, <span class="op">~</span><span class="va">path</span>,</span>
<span>  <span class="st">"R"</span>, <span class="st">"R/zaza.R"</span>,</span>
<span>  <span class="st">"R"</span>, <span class="st">"R/zozo.R"</span>,</span>
<span>  <span class="st">"test"</span>, <span class="st">"tests/testthat/test-zaza.R"</span>,</span>
<span>  <span class="st">"vignette"</span>, <span class="st">"vignettes/my-zaza-vignette.Rmd"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' \dontrun{</span></span>
<span><span class="fu"><a href="../reference/df_to_config.html">df_to_config</a></span><span class="op">(</span><span class="va">my_files_to_protect</span><span class="op">)</span></span>
<span><span class="co">#' }</span></span>
<span></span>
<span><span class="co"># Provide a list of `inflate()` parameters if you wish them</span></span>
<span><span class="co"># to be added in the dev/config_fusen.yaml file</span></span>
<span></span>
<span><span class="co">#' \dontrun{</span></span>
<span><span class="fu"><a href="../reference/df_to_config.html">df_to_config</a></span><span class="op">(</span><span class="va">my_files_to_protect</span>,</span>
<span>  inflate_parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    pkg <span class="op">=</span> <span class="st">"."</span>,</span>
<span>    flat_file <span class="op">=</span> <span class="st">"dev/my_flat.Rmd"</span>,</span>
<span>    vignette_name <span class="op">=</span> <span class="st">"My new vignette"</span>,</span>
<span>    open_vignette <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    document <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="st">"yes"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="list-files-that-are-not-registered-in-config">List files that are not registered in config<a class="anchor" aria-label="anchor" href="#list-files-that-are-not-registered-in-config"></a>
</h3>
<p>{fusen} now registers all files created during
<code><a href="../reference/inflate.html">inflate()</a></code>. This allows to clean the packages directories in
case some functions do not exist anymore and were renamed.<br>
However, this also requires to register all existing files if you
started your package without {fusen} or with an earlier version of
{fusen}.<br><code><a href="../reference/check_not_registered_files.html">check_not_registered_files()</a></code> shows files that are not
already registered in the yaml config file. The output is consistent
with what is needed for <code><a href="../reference/df_to_config.html">df_to_config()</a></code> to register them if
wanted.<br>
Note that <code><a href="../reference/check_not_registered_files.html">check_not_registered_files()</a></code> will try to guess
the source flat template, if you used {fusen} &gt;= 0.4 before.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' \dontrun{</span></span>
<span><span class="co"># Run this on the current package in development</span></span>
<span><span class="va">out_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_not_registered_files.html">check_not_registered_files</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">out_csv</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
<!-- Use eval=FALSE because inflate cannot work inside a Rmd vignette -->
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Or you can try on the reproducible example</span></span>
<span><span class="va">dummypackage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"clean"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">dummypackage</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># {fusen} steps</span></span>
<span><span class="fu"><a href="../reference/fill_description.html">fill_description</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="va">dummypackage</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Title <span class="op">=</span> <span class="st">"Dummy Package"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dev_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="../reference/add_flat_template.html">add_flat_template</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="va">dummypackage</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">flat_file</span> <span class="op">&lt;-</span> <span class="va">dev_file</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"flat_"</span>, <span class="va">dev_file</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># Inflate once</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html" class="external-link">with_project</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/inflate.html">inflate</a></span><span class="op">(</span></span>
<span>      pkg <span class="op">=</span> <span class="va">dummypackage</span>, flat_file <span class="op">=</span> <span class="va">flat_file</span>,</span>
<span>      vignette_name <span class="op">=</span> <span class="st">"Get started"</span>, check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      open_vignette <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Add a not registered file to the package</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"# test R file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="st">"R"</span>, <span class="st">"to_keep.R"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Use the fonction to check the list of files</span></span>
<span>  <span class="va">out_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_not_registered_files.html">check_not_registered_files</a></span><span class="op">(</span><span class="va">dummypackage</span><span class="op">)</span></span>
<span>  <span class="va">out_csv</span></span>
<span>  <span class="co"># Open the csv to modify manually the list of files in the csv created</span></span>
<span>  <span class="co"># Indeed, the "to_keep.R" file will be registered as</span></span>
<span>  <span class="co"># "No existing source path found."</span></span>
<span>  <span class="co"># Manually change this line with "keep"</span></span>
<span>  <span class="va">content_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">out_csv</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="co"># Here I change the line to simulate what you manually did above</span></span>
<span>  <span class="va">content_csv</span><span class="op">[</span><span class="va">content_csv</span><span class="op">[[</span><span class="st">"path"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"R/to_keep.R"</span>, <span class="st">"origin"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"keep"</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">content_csv</span>, <span class="va">out_csv</span><span class="op">)</span></span>
<span>  <span class="va">out_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_to_config.html">df_to_config</a></span><span class="op">(</span></span>
<span>    df_files <span class="op">=</span> <span class="va">out_csv</span>,</span>
<span>    inflate_parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      pkg <span class="op">=</span> <span class="va">dummypackage</span>, flat_file <span class="op">=</span> <span class="va">flat_file</span>,</span>
<span>      vignette_name <span class="op">=</span> <span class="st">"Get started"</span>, check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      open_vignette <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">out_config</span></span>
<span>  <span class="co"># Open the out_config file to see what's going on</span></span>
<span>  <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html" class="external-link">read_yaml</a></span><span class="op">(</span><span class="va">out_config</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">dummypackage</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="clean_fusen_files">clean_fusen_files<a class="anchor" aria-label="anchor" href="#clean_fusen_files"></a>
</h2>
<p>TODO</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/clean_fusen_files.html">clean_fusen_files</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; This does nothing for now</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="thinkr">
  <p></p>
<p>Developed by Sebastien Rochette.</p>,<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

<div class="author">
  <p>
    Developed by .
    Site built by <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
