<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Inflate all your flat files • fusen</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Inflate all your flat files">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fusen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/deal-with-a-fusen-flat-file.html">Deal with a 'fusen' flat file</a></li>
    <li><a class="dropdown-item" href="../articles/draw-a-tree-of-your-package-files-and-functions.html">Draw a tree of your package files and functions</a></li>
    <li><a class="dropdown-item" href="../articles/How-to-use-fusen.html">How to use fusen</a></li>
    <li><a class="dropdown-item" href="../articles/inflate-all-your-flat-files.html">Inflate all your flat files</a></li>
    <li><a class="dropdown-item" href="../articles/Maintain-packages-with-fusen.html">Maintain packages with {fusen}</a></li>
    <li><a class="dropdown-item" href="../articles/register-files-in-config.html">Register files in config</a></li>
    <li><a class="dropdown-item" href="../articles/share-on-a-github-website.html">Share on a GitHub website</a></li>
    <li><a class="dropdown-item" href="../articles/switch-from-a-package-developed-with-fusen-to-a-classical-package.html">Switch from a package developed with fusen to a classical package</a></li>
    <li><a class="dropdown-item" href="../articles/tips-and-tricks.html">Tips and tricks</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Thinkr-open/fusen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Inflate all your flat files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Thinkr-open/fusen/blob/main/vignettes/inflate-all-your-flat-files.Rmd" class="external-link"><code>vignettes/inflate-all-your-flat-files.Rmd</code></a></small>
      <div class="d-none name"><code>inflate-all-your-flat-files.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/fusen/">fusen</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_inflate_all.Rmd: do not edit by hand -->
<div class="section level2">
<h2 id="inflate-all-your-flat-files-at-once">Inflate all your flat files at once<a class="anchor" aria-label="anchor" href="#inflate-all-your-flat-files-at-once"></a>
</h2>
<p>The <code><a href="../reference/inflate_all.html">inflate_all()</a></code> function allows the user to inflate
all the active flat files available in the “dev/” directory at once.
This requires to inflate each new flat file individually at least once
in order to register the inflate parameters.</p>
<p>Prior to be able to inflate all the flat files, some checks are
performed, to assess whether the flat files are available to be used by
<code><a href="../reference/inflate_all.html">inflate_all()</a></code>.</p>
<div class="section level3">
<h3 id="store-configuration-of-each-flat-file-once">Store configuration of each flat file once<a class="anchor" aria-label="anchor" href="#store-configuration-of-each-flat-file-once"></a>
</h3>
<p><code><a href="../reference/inflate_all.html">inflate_all()</a></code> requires the existence of a complete
{fusen} configuration file: “dev/config_fusen.yaml”. This file exists
only from versions of {fusen} upper than v0.5.0:</p>
<ul>
<li><p>If you are working in a project initiated with a version of
{fusen} prior to v0.5.0, please manually run <code><a href="../reference/inflate.html">inflate()</a></code> for
each of the flat files you want to work with, in order to create the
appropriate “dev/config_fusen.yaml” file.</p></li>
<li><p>If you are already familiar with “dev/config_fusen.yaml” but were
working with a dev version of {fusen} prior to v0.5.1, your
“dev/config_fusen.yaml” file does not contain inflate-related
parameters. You will have to inflate again you flat files in order to
complete the configuration file with the proper <code><a href="../reference/inflate.html">inflate()</a></code>
parameters.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="prevent-some-flat-files-to-be-inflated">Prevent some flat files to be inflated<a class="anchor" aria-label="anchor" href="#prevent-some-flat-files-to-be-inflated"></a>
</h3>
<p>When a flat file is listed in the configuration file, it will be
inflated each time you run <code><a href="../reference/inflate_all.html">inflate_all()</a></code>.<br>
If you do not want this flat file to be inflated anymore, you can
deprecate it. Open the configuration file in “dev/config_fusen.yaml”.
Find the section concerning the flat file. Change the
<code>state: active</code> to <code>state: deprecated</code>. It will
not be inflated during the following calls to
<code><a href="../reference/inflate_all.html">inflate_all()</a></code>.</p>
<p>You may have a flat file that is a work in progress and is not
inflated yet. This will not affect other flat files to be inflated. In
this case you may see the following message. You can ignore it.</p>
<pre><code>The flat file {flat} is not going to be inflated.
It was detected in your flats directory but it is absent from the config file.
Please inflate() it manually when you are ready, so that it is accounted the next time.</code></pre>
</div>
<div class="section level3">
<h3 id="wrapper-around-inflate_all">Wrapper around <code>inflate_all()</code><a class="anchor" aria-label="anchor" href="#wrapper-around-inflate_all"></a>
</h3>
<p>There is a wrapper named <code><a href="../reference/inflate_all.html">inflate_all_no_check()</a></code> that
will prevent running <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code>. This is a short
version of <code>inflate_all(check = FALSE)</code>.</p>
</div>
<div class="section level3">
<h3 id="register-all-other-files-to-help-clean-your-project">Register all other files to help clean your project<a class="anchor" aria-label="anchor" href="#register-all-other-files-to-help-clean-your-project"></a>
</h3>
<p>Note also that all files stored in R, tests and vignettes directories
are checked to detect those not created from a flat file. They will need
to be registered in the config file too, in order to help you keep your
package clean of deprecated files. <code><a href="../reference/inflate_all.html">inflate_all()</a></code> thus runs
<code><a href="../reference/check_not_registered_files.html">check_not_registered_files()</a></code> behind the scene and informs
about the procedure. Read
<code><a href="../articles/register-files-in-config.html">vignette('register-files-in-config', package = 'fusen')</a></code> to
get more information.</p>
</div>
<div class="section level3">
<h3 id="compute-the-code-coverage">Compute the code coverage<a class="anchor" aria-label="anchor" href="#compute-the-code-coverage"></a>
</h3>
<p>If you want to compute the code coverage of your package, you can run
<code>inflate_all(codecov = TRUE)</code>. It will run
<code><a href="http://covr.r-lib.org/reference/package_coverage.html" class="external-link">covr::package_coverage()</a></code> at the end of the process.</p>
</div>
<div class="section level3">
<h3 id="complete-the-process-with-your-own-code-style">Complete the process with your own code style<a class="anchor" aria-label="anchor" href="#complete-the-process-with-your-own-code-style"></a>
</h3>
<p>You can run your preferred styling functions just before the check of
the package in <code><a href="../reference/inflate_all.html">inflate_all()</a></code>. For instance, if you want
{styler} package to clean your code during the inflate process, you can
run <code>inflate_all(stylers = styler::style_pkg)</code>. If you also
would like to clean the “dev/” directory, you can run
<code>inflate_all(stylers = function() {styler::style_pkg(); styler::style_dir("dev")})</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' \dontrun{</span></span>
<span><span class="co"># Usually, in the current package run inflate_all() directly</span></span>
<span><span class="co"># These functions change the current user workspace</span></span>
<span><span class="fu"><a href="../reference/inflate_all.html">inflate_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Or inflate_all_no_check() to prevent checks to run</span></span>
<span><span class="fu"><a href="../reference/inflate_all.html">inflate_all_no_check</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Or inflate with the styler you want</span></span>
<span><span class="fu"><a href="../reference/inflate_all.html">inflate_all</a></span><span class="op">(</span>stylers <span class="op">=</span> <span class="fu">styler</span><span class="fu">::</span><span class="va"><a href="https://styler.r-lib.org/reference/style_pkg.html" class="external-link">style_pkg</a></span><span class="op">)</span></span>
<span><span class="co">#' }</span></span>
<span></span>
<span><span class="co"># You can also inflate_all flats of another package as follows</span></span>
<span><span class="co"># Example with a dummy package with a flat file</span></span>
<span><span class="va">dummypackage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"inflateall.otherpkg"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">dummypackage</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fill_description.html">fill_description</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="va">dummypackage</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Title <span class="op">=</span> <span class="st">"Dummy Package"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">flat_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_flat_template.html">add_minimal_package</a></span><span class="op">(</span></span>
<span>  pkg <span class="op">=</span> <span class="va">dummypackage</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  open <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">flat_file</span> <span class="op">&lt;-</span> <span class="va">flat_files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"flat"</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">flat_files</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># Inflate the flat file once</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html" class="external-link">with_project</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="op">{</span></span>
<span>  <span class="co"># if you are starting from a brand new package, inflate_all() will crash</span></span>
<span>  <span class="co"># it's because of the absence of a fusen config file</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># inflate_all() # will crash</span></span>
<span></span>
<span>  <span class="co"># Add licence</span></span>
<span>  <span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/licenses.html" class="external-link">use_mit_license</a></span><span class="op">(</span><span class="st">"John Doe"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># you need to inflate manually your flat file first</span></span>
<span>  <span class="fu"><a href="../reference/inflate.html">inflate</a></span><span class="op">(</span></span>
<span>    pkg <span class="op">=</span> <span class="va">dummypackage</span>,</span>
<span>    flat_file <span class="op">=</span> <span class="va">flat_file</span>,</span>
<span>    vignette_name <span class="op">=</span> <span class="st">"Get started"</span>,</span>
<span>    check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    open_vignette <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    document <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="st">"yes"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># your config file has been created</span></span>
<span>  <span class="va">config_yml_ref</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html" class="external-link">read_yaml</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"fusen.config_file"</span>, default <span class="op">=</span> <span class="st">"dev/config_fusen.yaml"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Next time, you can run inflate_all() directly</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html" class="external-link">with_project</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="op">{</span></span>
<span>  <span class="co"># now you can run inflate_all()</span></span>
<span>  <span class="fu"><a href="../reference/inflate_all.html">inflate_all</a></span><span class="op">(</span>check <span class="op">=</span> <span class="cn">FALSE</span>, document <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If you wish, the code coverage can be computed</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html" class="external-link">with_project</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="op">{</span></span>
<span>  <span class="co"># now you can run inflate_all()</span></span>
<span>  <span class="fu"><a href="../reference/inflate_all.html">inflate_all</a></span><span class="op">(</span>check <span class="op">=</span> <span class="cn">FALSE</span>, document <span class="op">=</span> <span class="cn">TRUE</span>, codecov <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean the temporary directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">dummypackage</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastien Rochette, Vincent Guyader, Yohann Mansiaux.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
